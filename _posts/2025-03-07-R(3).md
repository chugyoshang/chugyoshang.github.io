---
layout: post
title: R-1
date: 2025-03-07 09:00 +0900
last_modified_at: 2025-03-07 14:00 +0900
categories: [R]
tags: [ë°”ì´ì˜¤ë©”ë””ì»¬, AI, ê±´ì–‘ëŒ€í•™êµë³‘ì›, ê°œë°œê³¼ì •, R]
toc: true
---

ğŸ“Œ R ë°ì´í„° ë¶„ì„ ì£¼ìš” í•¨ìˆ˜ ë° ì‚¬ìš©ë²• ì •ë¦¬
1. Iris ë°ì´í„°ì…‹ íƒìƒ‰í•˜ê¸°
text
head(iris) # ìƒìœ„ 6ê°œ í–‰ ë³´ê¸°
tail(iris) # í•˜ìœ„ 6ê°œ í–‰ ë³´ê¸°
dim(iris) # ë°ì´í„° ì°¨ì› í™•ì¸ (í–‰, ì—´)
length(iris) # ì—´ ê°œìˆ˜ í™•ì¸
NROW(iris) # í–‰ ê°œìˆ˜ í™•ì¸
ncol(iris) # ì—´ ê°œìˆ˜ í™•ì¸
names(iris) # ì—´ ì´ë¦„ í™•ì¸
summary(iris) # í†µê³„ì  ìš”ì•½ ì •ë³´ ì œê³µ
str(iris) # ë°ì´í„° êµ¬ì¡° í™•ì¸
class(iris) # ê°ì²´ íƒ€ì… í™•ì¸
sapply(iris, class) # ê° ì—´ì˜ í´ë˜ìŠ¤ íƒ€ì… í™•ì¸ (apply ê³„ì—´ í•¨ìˆ˜)
boxplot(iris) # ì´ìƒì¹˜(outlier)ë¥¼ ì‹œê°ì ìœ¼ë¡œ í™•ì¸
2. ê²°ì¸¡ì¹˜ ì²˜ë¦¬ ë° ë°ì´í„° ì „ì²˜ë¦¬
ì‹œê³„ì—´ ë°ì´í„° ì˜ˆì‹œ (forecast íŒ¨í‚¤ì§€)

text
install.packages("forecast")
library(forecast)

sum(is.na(weather)) # ê²°ì¸¡ì¹˜ ê°œìˆ˜ í™•ì¸
weather <- na.omit(weather) # ê²°ì¸¡ì¹˜ ì œê±°
BostonHousing ë°ì´í„°ì…‹ (mlbench íŒ¨í‚¤ì§€)

text
install.packages("mlbench")
library(mlbench)

data("BostonHousing", package="mlbench")
original <- BostonHousing # ì›ë³¸ ë°ì´í„° ë°±ì—…

set.seed(100) # ë‚œìˆ˜ ê³ ì • (ì¬í˜„ì„± ë³´ì¥)
str(BostonHousing)
sum(is.na(BostonHousing)) # ê²°ì¸¡ì¹˜ í™•ì¸ ë° ì œê±°
BostonHousing <- na.omit(BostonHousing)

# ì„ì˜ë¡œ ê²°ì¸¡ì¹˜ ìƒì„± í›„ ì²˜ë¦¬ ì˜ˆì‹œ
BostonHousing[sample(1:nrow(BostonHousing),40), "rad"] <- NA

library(mice)
sapply(BostonHousing, function(x) sum(is.na(x))) # ê° ì—´ë³„ ê²°ì¸¡ì¹˜ ê°œìˆ˜ í™•ì¸

# íšŒê·€ ë¶„ì„ ì˜ˆì‹œ (ì„ í˜• íšŒê·€ ëª¨ë¸ ìƒì„±)
lm(medv ~ ptratio + rad, data=BostonHousing, na.action=na.omit)

# ì˜ˆì¸¡ ì‹ ì˜ˆì‹œ:
# medv = -1.8121 * ptratio + (-0.1858 * rad) + 57.8817
ê²°ì¸¡ì¹˜ ëŒ€ì²´(imputation)

text
library(Hmisc)
BostonHousing$rad <- impute(BostonHousing$rad, median)
3. ë°ì´í„° ë²”ì£¼í™” (Binning)
text
x <- -5:5
cut(x, breaks=2)
cut(x, breaks=c(-6,2,5))

# êµ¬ê°„ì— ì´ë¦„(label)ì„ ë¶™ì´ëŠ” ë°©ë²•:
age <- c(0,12,89,14,25,2,65)
cut(age,
    breaks=c(0,19,24,40,65,Inf),
    labels=c("minor","Children","Youth","Adult","Senior"))
4. Cars93 ë°ì´í„°ì…‹ ì‹œê°í™” ë° ë²”ì£¼í™” (ggplot2 íŒ¨í‚¤ì§€)
text
library(MASS)
library(ggplot2)

str(Cars93)
hist(Cars93$MPG.highway)

disc_1 <- Cars93[,c("Model", "MPG.highway")]
disc_1 <- within(disc_1,{
  MPG.highway_cd = character(0)
  MPG.highway_cd[MPG.highway >=20 & MPG.highway <25] = "20~25"
  MPG.highway_cd[MPG.highway >=25 & MPG.highway <30] = "25~30"
  MPG.highway_cd[MPG.highway >=30 & MPG.highway <35] = "30~35"
  MPG.highway_cd[MPG.highway >=35 & MPG.highway <40] = "35~40"
  MPG.highway_cd[MPG.highway >=40 & MPG.highway <45] = "40~45"
  MPG.highway_cd[MPG.highway >=45 & MPG.highway <=50] = "45~50"

  MPG.highway_cd = factor(MPG.highway_cd,
                          levels=c("20~25","25~30","30~35","35~40","40~45","45~50"))
})

table(disc_1$MPG.highway_cd)

# ë²”ì£¼ë³„ í‰ê· ê³¼ í‘œì¤€í¸ì°¨ ê³„ì‚°:
tapply(disc_1$MPG.highway, disc_1$MPG.highway_cd, mean)
tapply(disc_1$MPG.highway, disc_1$MPG.highway_cd, sd)

# ì‹œê°í™”:
ggplot(disc_1,aes(x=MPG.highway_cd,fill=MPG.highway_cd))+geom_bar()
ggplot(disc_1,aes(x=MPG.highway_cd,fill=MPG.highway_cd))+geom_dotplot(binwidth=0.3)
5. ì›-í•« ì¸ì½”ë”© (One-hot encoding)
text
cust_id <- c("ëŒ€í•œ", "ë¯¼êµ­", "ë§Œì„¸", "ì˜ì›", "ë¬´ê¶", "ë°œì „", "í–‰ë³µ")
age <- c(25,45,31,30,49,53,27)
cust_profile <- data.frame(cust_id, age)

cust_profile <- transform(cust_profile,
                          age_20=ifelse(age>=20&age<30,1,0),
                          age_30=ifelse(age>=30&age<40,1,0),
                          age_40=ifelse(age>=40&age<50,1,0),
                          age_50=ifelse(age>=50&age<60,1,0))
6. ì •ê·œí™”(Normalization)
Min-Max ì •ê·œí™”

text
min_max_norm <- function(x){ (x-min(x))/(max(x)-min(x)) }
iris_norm <- as.data.frame(lapply(iris[1:4],min_max_norm))
Z-ì ìˆ˜ ì •ê·œí™”

text
z_normal <- function(x){ (x-mean(x))/sd(x) }
iris_z_norm <- as.data.frame(lapply(iris[1:4], z_normal))
7. ì´ìƒì¹˜ íƒì§€ ë° ì²˜ë¦¬
text
boxplot(iris)
re <- boxplot(iris)$out

# ì´ìƒì¹˜ë¥¼ NAë¡œ ì²˜ë¦¬ í›„ ì¤‘ì•™ê°’ìœ¼ë¡œ ëŒ€ì²´:
iris$Sepal.Width[iris$Sepal.Width %in% re] <- NA
library(mice)
iris$Sepal.Width <- impute(iris$Sepal.Width, median)
8. NYC Flights ë°ì´í„° ì²˜ë¦¬ ì˜ˆì‹œ (nycflights13 íŒ¨í‚¤ì§€)
text
install.packages("nycflights13")
library(nycflights13)

weather <- nycflights13::weather

upper <- quantile(weather$temp,.75)+1.5*IQR(weather$temp)
lower <- quantile(weather$temp,.25)-1.5*IQR(weather$temp)

weather<-weather[weather$temp<upper&weather$temp>lower,]
9. ìƒ˜í”Œ íŒë§¤ë°ì´í„° ìƒì„± ë° ë¶„ì„ ì˜ˆì œ
state_table (ì§€ì—­ì •ë³´), month_table (ì›” ì •ë³´), prod_table (ìƒí’ˆì •ë³´)ë¥¼ ìƒì„± í›„ íŒë§¤ ë°ì´í„°ë¥¼ ëœë¤í•˜ê²Œ ìƒì„±í•˜ëŠ” í•¨ìˆ˜(gen_sales)ë¥¼ ì •ì˜í•˜ì—¬ ì‚¬ìš©.

tapply()ë¥¼ ì´ìš©í•´ ë‹¤ì–‘í•œ ê´€ì ì—ì„œ ì§‘ê³„ ê°€ëŠ¥.

text
sales_fact<-gen_sales(500)
str(sales_fact)

# ì œí’ˆë³„ íŒë§¤ í˜„í™©:
tapply(sales_fact$amount,sales_fact[,c("prod")],sum)

# ì§€ì—­ë³„ íŒë§¤ í˜„í™©:
tapply(sales_fact$amount,sales_fact[,c("loc")],sum)

# íŠ¹ì • ì¡°ê±´ì˜ íŒë§¤ì•¡ ì¶”ì¶œ ì˜ˆì‹œ:
subset(sales_fact,
       loc=="SE"&prod=="Printer"&year==2013)$amount %>% sum()